(function(){"use strict";angular.module("codoshop",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.router","codoshop-tree","codoshopDropMenu","codoshop-sectionTabs","codoshop-projects","codoshop-colors","codoshop-outline","codoshopTextEditor"])}).call(this),function(){"use strict";angular.module("codoshop").directive("codoshop",["$state","$stateParams","CodoshopFile",function(e,n,t){return{templateUrl:"app/main.html",controller:["$scope",function(t){return function(o){return function(i,c){null==t.codoshopVM&&(t.codoshopVM={}),c=t.codoshopVM,null==c.modules&&(c.modules={}),t.$state=e,t.$stateParams=n,null==t.openFiles&&(t.openFiles=[]),null==t.projects&&(t.projects=[]),t.cmLookup=new WeakMap,o.selectFile=function(e){return function(n){var t,o,i,c,l;for(c=e.openFiles,o=0,i=c.length;i>o;o++)t=c[o],t.selected===!0&&t!==n&&(t.selected=!1);n.selected!==!0&&(n.selected=!0),n.click_order=(null!=(l=[].concat(e.openFiles).sort(function(e,n){var t,o;return(null!=(t=n.click_order)?t:0)-(null!=(o=e.click_order)?o:0)}).click_order)?l:0)+1}}(i),t.selectedFile=function(e,n){return function(){return n=e.openFiles.filter(function(e){return e.selected===!0}),n.length>0?n[0]:null}}(i,null),t.$watchCollection("openFiles",function(e){return function(n,t,o){var i,c;c=t.filter(function(e){return function(n){return-1===e.indexOf(n)}}(n)),i=n.filter(function(e){return function(n){return-1===e.indexOf(n)}}(t)),n.every(function(n){return function(t){return t.selected===!0&&-1===n.indexOf(t)?(e.selectFile(t),!1):!0}}(t)),!o.selectedFile()&&o.openFiles.length>0&&e.selectFile(o.openFiles[0])}}(o)),t.newFile=function(e,n){return function(){n={name:"untitled",mode:"plaintext",content:"",selected:!0},e.openFiles.push(n)}}(t,null),o.newProject=function(e){return function(){return function(){e.projects.push({name:"Untitled"})}(null)}}(t),c.w=0,c.h=0,null==c.columns&&(c.columns=[{sections:[{articles:[{name:"Projects",templateUrl:"components/projects/projects.html"},{name:"Other"}]}],style:{width:"220px"}},{sections:[{tabs:!1,articles:[{name:"Text Editor",templateUrl:"components/textEditor/textEditor.html"}]}],"class":"fc-g-1"},{sections:[{articles:[{name:"Colors",templateUrl:"components/colors/colors.html"}],style:{height:"200px","flex-grow":0}},{articles:[{name:"Outline",templateUrl:"components/outline/outline.html"}]}],style:{width:"180px"}}]),c.isSelected=function(e,n){return e.selected===!0||!n.some(function(e){return e.selected===!0})&&e===n[0]}}}(this)(t,null)}],link:function(e,n,o,i){return function(){return function(n,o){i=[].concat(i)[0],n.lhc=function(e){return function(n){return console.log("scope line height evaluated"),parseFloat(e.css("line-height"))*n+"px"}}(o),n.$watch(function(e){return function(){return e.css("width")}}(o),function(e){return function(n){0!==n&&(e.w=n)}}(e.codoshopVM)),n.$watch(function(e){return function(){return e.css("height")}}(o),function(e){return function(n){0!==n&&(e.h=n)}}(e.codoshopVM)),o.draggable({handle:"> .codoshop-wrapper > .top"}),o.tooltip(),n.inputFile=function(e,n){return function(e){return function(o){o=n.find("input[ng-attr-codoshop-file-input]"),o[0].addEventListener("change",function(e,n){return function(o){return function(i,c,l){if(i=e[0].files[0]){l=new FileReader,l.onload=function(e){return function(){i=new t({name:i.name,mode:"plaintext",content:l.result,type:"file"}),e(i)}}(n);try{l.readAsText(i)}catch(r){o=r,console.log(o),n()}}}(null,null,null)}}(o,e)),o.show(),o.click(),o.hide()}(null)}}(n,o,i)}}(this)(e,$(n))}}}]).directive("topTabs",function(){return{require:"^codoshop",link:function(e,n,t,o){o=[].concat(o)[0],e.select=function(e,n){return function(t){return function(e){n.selectFile(e)}(e.openFiles[t])}}(e,o),e.close=function(e){return function(n){return function(){e.openFiles.splice(n,1)}(e.openFiles[n])}}(e)}}}).directive("resizable",function(){return{link:function(e,n,t){return function(t){n.resizable({handles:t,resize:function(n){return function(t,o){"w"===n&&(o.position.left=o.originalPosition.left),e.$apply()}}(t)})}(t.resizable)}}}).directive("hsort",function(){return function(e,n){n.sortable({axis:"x",items:"> *:not([data-sort=false])"})}}).directive("vsort",function(){return function(e,n){n.sortable({axis:"y"})}}).animation(".animate-slide",function(){return{addClass:function(e,n,t){return"ng-hide"===n&&$(e).slideUp({duration:150,complete:t,progress:function(e){return function(){$(e).trigger("animationProgress")}}(e)}),function(){}},removeClass:function(e,n,t){return"ng-hide"===n&&("none"===$(e).css("display")&&$(e).hide(),$(e).slideDown({duration:150,complete:t,progress:function(e){return function(){$(e).trigger("animationProgress")}}(e)})),function(){}}}})}.call(this),function(){"use strict";angular.module("codoshop").factory("CodoshopFile",[function(){var e;return e=function(){function e(e){this.opts=e,this.name=this.opts.name,this.mode=this.opts.mode,this.content=this.opts.content,this.type=this.opts.type}return e}()}])}.call(this),function(){"use strict";angular.module("codoshop-tree",["ngAnimate"]).controller("zTree",["$scope",function(e){e.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]).directive("node",function(){return function(e){e.click=function(e){return function(){switch(e.node.status){case"closed":e.node.status="open";break;default:e.node.status="closed"}}}(e)}})}.call(this),function(){"use strict";angular.module("codoshopDropMenu",[]).directive("codoshopDropMenu",function(){return{controller:["$scope",function(e){return function(n){return function(t){var o;null==(o=e.codoshopVM).dropMenu&&(o.dropMenu={}),t=e.codoshopVM.dropMenu,null==t.show&&(t.show=!1),null==t.anchor&&(t.anchor=null),null==t.items&&(t.items=[]),n.mE=null,n.mX=0,n.mY=0,$(document).mousemove(function(e){return function(n){n&&(e.mE=n,e.mX=n.pageX,e.mY=n.pageY)}}(n))}}(this)(null)}],link:function(e,n,t,o){var i;i=[].concat(o)[0],e.$watch("codoshopVM.dropMenu.show",function(e,n,t){return function(e){e===!0&&n.mE&&(console.log(n.mX,n.mY),console.log(n.mE.pageX,n.mE.pageY),t.css("top",0),t.css("left",0),t.position({my:"left top",of:n.mE,collision:"fit"}))}}(e,i,n)),$(document).click(function(e){return function(){e.codoshopVM.dropMenu.show=!1,e.$apply()}}(e,n))}}})}.call(this),function(){"use strict";angular.module("codoshop-sectionTabs",[]).directive("sectionTabs",function(){return{templateUrl:"components/sectionTabs/sectionTabs.html",link:function(e,n,t){e.tabs=e.$eval(t.tabs)}}})}.call(this),function(){"use strict";angular.module("codoshop-parser",[]).factory("parser",function(){return{what:!0}})}.call(this),function(){"use strict";angular.module("codoshop-projects",["codoshop-tree","codoshopDropMenu"]).directive("codoshopProjectsButtonRow",function(){return{templateUrl:"components/projects/buttonRow.html",require:"^codoshop",controller:["$scope",function(e){return function(){return function(e){e.move=function(e){return function(n,t){var o;0>t||t>e.length-1&&t===e.length-1,n!==t&&(o=e.splice(n,1)[0],e.splice(t,0,o))}}(e.projects)}}(this)(e)}],link:function(e,n,t,o){var i;i=[].concat(o)[0],e.newProject=function(e){return function(){e.newProject()}}(i),e.toggleAll=function(e){return function(n,t){var o,i,c,l,r;for(null==n&&(n=[]),null==t&&(t=[]),e.projects.every(function(e,n){return function(t){return function(o,i){return i&&i.length>0&&("expanded"===o&&e.push(t),"expanded"!==o&&n.push(t)),!0}(t.status,t.dirTree)}}(n,t)),i=0,l=n.length;l>i;i++)o=n[i],o.status="contracted";for(c=0,r=t.length;r>c;c++)o=t[c],0===n.length&&(o.status="expanded")}}(e),e.expandedProjects=function(){return e.projects.filter(function(e){return function(e,n){return n&&n.length>0&&"expanded"===e}(e.status,e.dirTree)})},e.contractedProjects=function(){return e.projects.filter(function(e){return function(e,n){return n&&n.length>0&&"expanded"!==e}(e.status,e.dirTree)})}}}}).directive("codoshopProjects",function(){return{link:function(){Array.prototype.move=function(e,n){return this.splice(n,0,this.splice(e,1)[0])}}}}).directive("codoshopProjectView",function(){return{templateUrl:"components/projects/project.html",require:"^codoshop",controller:["$scope",function(e){return function(){}(e)}],link:function(e,n,t,o){return function(e,n){o=[].concat(o)[0],e.openToggle=function(e){return function(n,t){null==n&&(n=e.project.status),null==t&&(t=e.project.dirTree),e.project.status="expanded"===n?"contracted":"expanded"}}(e,o),e.add=function(e){return function(){e.inputFile(function(n){var t;return null==(t=e.project).dirTree&&(t.dirTree=[]),e.project.dirTree.push(n),e.$apply()})}}(e),e.open=function(e){return function(n){"file"===n.type&&(e.openFiles.push(n),o.selectFile(n))}}(e),e.openSettingsMenu=function(e){return function(n){n.preventDefault(),n.stopPropagation(),e.codoshopVM.dropMenu.items=[{label:"add folder/files...","ng-click":function(n){n.stopPropagation(),e.inputFile(function(n){var t;null==(t=e.project).dirTree&&(t.dirTree=[]),e.project.dirTree.push(n),e.$apply()})}},{label:"rename...","ng-click":"rename()"},{label:"reveal in finder...","ng-click":"reveal()"},{label:"remove","ng-click":"remove()"}],e.codoshopVM.dropMenu.show=!0}}(e),e.$last&&$(n).css("height",$(n).parent().height()),$(n).bind("animationProgress",function(n){return function(){e.$last&&n.css("height",n.parent().height())}}($(n))),e.$watchCollection("projects",function(){e.project!==e.projects[e.projects.length-1]?n.css("height","auto"):n.css("height",n.parent().height())})}(e,$(n))}}})}.call(this),function(){"use strict";angular.module("codoshopDropMenu").directive("codoshopProjectsDropMenu",function(){return{link:function(e,n){return function(t){t=$(n).find("input"),t[0].addEventListener("change",function(){return function(e,n,o){e=t.files[0],n=/text.*/,e.type.match(n)&&(o=new FileReader,o.onload=function(){},o.readAsText(e))}(null,null,null)}),e.inputFile=function(e,n){return function(e){e.stopPropagation(),n.show(),n.click(),n.hide()}}(e,t),e.rename=function(){},e.reveal=function(){},e.remove=function(){}}(null)}}})}.call(this),function(){"use strict";angular.module("codoshop-colors",["codoshop-parser"]).directive("colorss",function(){return{link:function(e){e.colors=[],e.$watch(function(){return e.selectedFile()},function(e,n,t){return function(n){t.colors.length=0,e&&(n=t.cmLookup.get(e),CodeMirror.runMode(n.getValue(),e.mode,function(e,n){return function(o){var i;if("atom"===n||"builtin"===n)try{o=chroma(e),console.log(o.css()),o&&t.colors.push({string:o.css()})}catch(c){i=c,i=i}}(null)})),t.fillers=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]}(null)})}}})}.call(this),function(){"use strict";angular.module("codoshop-outline",[]).directive("outline",function(){return{link:function(e){e.treee=[],e.$watch(function(){return e.selectedFile()},function(e,n,t){return function(n,o,i){t.treee.length=0,e&&(n=t.cmLookup.get(e),n.eachLine(function(e){return function(n){e.push(n)}}(o)),o.every(function(e,n,t){return function(e,o){return function(e){return e&&t.push(e),!0}(CodeMirror.fold.auto(n,{line:o,ch:0}))}}(t,n,i)),o.every(function(e,n){return function(e,t){return function(o,i,c,l){return i=CodeMirror.fold.auto(n,{line:t,ch:0}),i&&(o.fold=i,l=i.to,c=i.from,c.ch>0&&(o.name=n.getRange({line:c.line,ch:0},{line:c.line,ch:9999999}))),o.name=e.text,o.nodes=[],!0}({},null,null,null,null)}}(t,n)))}(null,[],[],[])})}}})}.call(this),function(){"use strict";angular.module("codoshopTextEditor",[]).directive("codoshopTextEditorInstance",function(){return{controller:["$scope",function(){return function(){return function(){}}(this)(null)}],link:function(e,n){return function(n,t,o,i,c){e.opts={value:e.file.content,mode:o,lineNumbers:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],theme:"night"},c=CodeMirror(n[0],e.opts),e.cmLookup.set(e.file,c),c.setSize(n.width(),n.height()),e.$watchGroup(["codoshopVM.w","codoshopVM.h"],function(e){return function(){return function(n,t){n=e.width(),t=e.height(),0!==n&&0!==t&&c.setSize(n,t)}(null,null)}}(n))}($(n),e.codoshopVM,e.file.mode,null,null)}}})}.call(this),angular.module("codoshop").run(["$templateCache",function(e){e.put("app/main.html",'<div class="codoshop-wrapper"><div class="top"><div class="content"><ul class="dots"><li><a href="javascript:void(0)"></a></li><li><a href="javascript:void(0)"></a></li><li><a href="javascript:void(0)"></a></li></ul></div></div><div class="codoshop-content"><div ng-repeat="column in codoshopVM.columns" ng-class="column.class" ng-style="column.style" class="codoshop-column"><section ng-repeat="section in column.sections" ng-style="section.style" class="fc-g-1"><nav ng-if="section.tabs != false"><div class="codoshop-top-bar"><div><div><div></div></div></div></div><section-tabs data-tabs="{{section.articles}}"></section-tabs></nav><article ng-repeat="article in section.articles" ng-show="codoshopVM.isSelected(article, section.articles)"><ng-include src="article.templateUrl"></ng-include></article></section></div><div ng-show="codoshopVM.dialog.show == true" class="codoshop-dialog-wrapper"><div ng-attr-dialog="" ng-show="codoshopVM.dialog.show == true" class="codoshop-dialog"></div></div></div></div><div ng-attr-codoshop-drop-menu="" ng-show="codoshopVM.dropMenu.show == true"><ul><li ng-repeat="item in codoshopVM.dropMenu.items"><a ng-click="item[&quot;ng-click&quot;]($event, item)" href="#" onclick="return false;">{{item.label}}</a></li></ul></div><input ng-attr-codoshop-file-input="" type="file" style="display: none; position: absolute;">'),e.put("components/colors/colors.html",'<div ng-attr-colorss="" style="padding: 7px;" class="colors-section light-block fc-g-1"><div><div ng-repeat="c in colors" style="width: 21px; height: 21px;" class="color-cell fp fp-center"><div ng-style="{&quot;background-color&quot;: c.string}"></div></div><div ng-repeat="c in fillers" style="width: 21px; height: 21px;" class="color-cell fp fp-center"><div ng-style="{\'background-color\': \'none\'}"></div></div></div><div><div><div>{{colors.length}}&nbsp;&nbsp;</div><a href="#" onclick="return false;" class="fa fa-cog"></a></div><div><span>colors</span><span>detected</span></div></div></div>'),e.put("components/outline/outline.html",'<div style="flex-grow: 0; flex-shrink: 0;" class="bg-color-1"><ul class="text-tabs"><li style="flex-grow: 0;"></li><li><a ng-class="{selected: true}" href="javascript:void(0)"><div><span>map</span></div></a></li><li><a href="javascript:void(0)"><div><span>tree</span></div></a></li><li style="flex-grow: 0;"></li></ul></div><div ng-attr-outline="" class="bg-color-1 fc-g-1"><script type="text/ng-template" id="node_template2.html"><a ng-class="{roww: true, dir: node.nodes && node.nodes.length > 0, open: node.status == \'open\', closed: node.status == \'closed\'}" ng-click="click()" ng-attr-node href="javascript:void(0)"> <div class="arrow"></div><div class="icon"></div><div class="label">{{node.name}}</div></a> <ul><li ng-repeat="node in node.nodes" ng-include="\'node_template2.html\'"></li></ul></script><ul ng-controller="zTree" class="ztree"><li ng-repeat="node in treee" ng-include="\'node_template2.html\'"></li></ul></div>'),e.put("components/projects/buttonRow.html",'<li>{{projects.length}} projects</li><li></li><li><a href="javascript:void(0)" ng-click="toggleAll()"><span ng-class="{\'fa-compress\': (expandedProjects().length &gt; 0), \'fa-expand\': (expandedProjects().length == 0 &amp;&amp; contractedProjects().length &gt; 0)}" class="fa"></span></a></li><li></li><li><a href="javascript:void(0)"><span class="fa fa-folder-open"></span></a></li><li></li><li><a href="javascript:void(0)" ng-click="newProject()">+</a></li><li></li>'),e.put("components/projects/dropMenu.html",'<ul ng-attr-codoshop-projects-drop-menu=""><li><a ng-click="add($event)" href="#" onclick="return false;">add folder/files...</a> <input type="file" style="display: none"></li><li><a ng-click="rename()" href="#" onclick="return false;">rename...</a></li><li><a ng-click="reveal()" href="#" onclick="return false;">reveal in finder...</a></li><li><a ng-click="remove()" href="#" onclick="return false;">remove</a></li></ul>'),e.put("components/projects/project.html",'<div><header><div></div><div><div></div><a ng-click="openToggle()" href="#" onclick="return false;"><div>{{project.name}}</div><div>../unknown/{{project.name}}</div></a></div></header><div ng-show="project.status == \'expanded\'" class="animate-slide"><div><ul class="codoshop-project-buttons"><li><a ng-click="move($index, 999999)" href="#" onclick="return false;" class="fa fa-angle-double-down"></a></li><li><a ng-click="move($index, 0)" href="#" onclick="return false;" class="fa fa-angle-double-up"></a></li><li><a ng-click="move($index, $index + 1)" href="#" onclick="return false;" class="fa fa-angle-down"></a></li><li><a ng-click="move($index, $index - 1)" href="#" onclick="return false;" class="fa fa-angle-up"></a></li><li><a ng-disabled="project.dirTree &amp;&amp; project.dirTree.length &gt; 0" ng-click="openToggle()" href="#" onclick="return false;" class="fa fa-angle-down"></a></li><li><a ng-click="openSettingsMenu($event, project)" href="#" onclick="return false;" class="fa fa-cog"></a></li></ul><div ng-show="!project.dirTree || project.dirTree.length &lt; 1" class="codoshop-project-msg"><i>No folders or files.</i><a ng-click="add()" href="#" onclick="return false;">Add some.</a></div><div class="fp fp-fd-c"><script type="text/ng-template" id="node_template.html"><a ng-click="click()" ng-dblclick=\'open(node)\' class="bg-color-1" ng-attr-node href="javascript:void(0)"> <div></div> <div class="arrow"></div> <div class="icon fa fa-folder-o"></div> <div class="label">{{node.name}}</div> </a> <ul ng-show="node.status == \'open\'" class="animate-slide"> <li ng-repeat="node in node.nodes" ng-class="{dir: node.type == \'dir\'}" ng-include="\'node_template.html\'"></li> </ul></script><ul ng-controller="zTree" class="codoshop-tree"><li ng-repeat="node in project.dirTree" ng-class="{dir: node.type == \'dir\', open: node.status == \'open\'}" ng-include="\'node_template.html\'"></li></ul></div></div></div><div></div></div>'),e.put("components/projects/projects.html",'<div class="codoshop-projects-button-row-wrapper"><ul ng-attr-codoshop-projects-button-row="" class="codoshop-projects-button-row"></ul></div><div ng-attr-codoshop-projects="" class="codoshop-project-scrollview"><div ng-attr-codoshop-project-view="" ng-repeat="project in projects" ng-class="{expanded: project.status == \'expanded\'}" ng-selected="project.status == &quot;expanded&quot;"></div></div>'),e.put("components/sectionTabs/sectionTabs.html",'<ul ng-attr-hsort="" class="codoshop-section-tabs"><li ng-repeat="tab in tabs" ng-selected="codoshopVM.isSelected(tab, tabs)"><a href="javascript:void(0)"><div>{{tab.name}}</div></a></li><li data-sort="false"><div></div></li></ul>'),e.put("components/textEditor/textEditor.html",'<div ng-attr-codoshop-text-editor=""><ul ng-attr-hsort="" ng-attr-top-tabs="" class="codoshop-text-editor-tabs"><li ng-repeat="file in openFiles" ng-class="{ tab: true, selected: file.selected }"><div><a href="javascript:void(0)" ng-click="select($index)"><span>{{file.name}}</span></a><a href="javascript:void(0)" ng-click="close($index)"><div></div></a></div></li><li data-sort="false"><div><a href="javascript:void(0)" ng-click="newFile()" ng-attr-tooltip="" title="new file"><span>+</span></a></div></li><li data-sort="false"><div></div></li></ul><div class="codoshop-text-editor-content"><div ng-attr-codoshop-text-editor-instance="" ng-repeat="file in openFiles" ng-show="file.selected == true"></div></div></div>')}]);